/** @license: OpenAdViewability (BSD-3 License): https://github.com/picatcha/OpenAdViewability/ */
!function(){"use strict";function t(){var t={percentObscured:0,percentViewable:0,acceptedViewablePercentage:50,viewabilityStatus:!1,duration:0};this.DEBUG_MODE=!1,this.checkViewability=function(e,o){function a(){i(e)||(u=c(),r());var n=c()-u,h=n>=1e3;t.duration=n,h?(t.viewabilityStatus=!0,d.DEBUG_MODE||window.cancelAFrame(l)):l=window.requestAnimFrame(a),o(t)}function c(){return"object"===n(window.performance)?window.performance.now():(new Date).getTime()}var u=c(),d=this,l=window.requestAnimFrame(a)};var r=function(){t.percentObscured=0,t.duration=0,t.viewabilityStatus=!1},i=function(e){var n=e.getBoundingClientRect(),r=n.width*n.height;if(r>=242500&&(t.acceptedViewablePercentage=30),a(e))return!1;if(c(e))return!1;var i=o(e);return!i.error&&(!(t.percentViewable&&t.percentViewable<t.acceptedViewablePercentage)&&t.percentViewable)},o=function(n){var r=new e;t.percentObscured=t.percentObscured||0;var i=r.getViewabilityState(n,window);return i.error||(t.percentViewable=i.percentViewable-t.percentObscured),i},a=function(t){var e=window.getComputedStyle(t,null),n=e.getPropertyValue("visibility"),r=e.getPropertyValue("display");return"hidden"===n||"none"===r},c=function(e){var n=e.getBoundingClientRect(),r=12,i=n.left+r,o=n.right-r,a=Math.max(0,n.top+r),c=n.bottom-r,l=Math.floor(n.left+n.width/2),f=Math.floor(n.top+n.height/2),s=[{x:i,y:a},{x:l,y:a},{x:o,y:a},{x:i,y:f},{x:l,y:f},{x:o,y:f},{x:i,y:c},{x:l,y:c},{x:o,y:c}],m=[];for(var g in s)if(s.hasOwnProperty(g)&&s[g]&&s[g].x>=0&&s[g].y>=0){var p=document.elementFromPoint(s[g].x,s[g].y);if(d(e,p)){var b=p.getBoundingClientRect();if(n.top>b.bottom)continue;var w=h(n,b);if(w>0&&(u(m,p)||m.push({el:p,area:w}),t.percentObscured>100-t.acceptedViewablePercentage))return!0}}return t.percentObscured=m.length>0?100*m.map(function(t){return t.area}).reduce(function(t,e){return Math.max(t,e)}):0,t.percentViewable=100-t.percentObscured,!1},u=function(t,e){return t.length>0&&t.map(function(t){return t.el}).some(function(t){return t===e})},d=function(t,e){return null!==e&&t!==e&&!t.contains(e)&&!e.contains(t)&&!l(t,e)},l=function(t,e){var n=e.nodeName,r=window.getComputedStyle(e,null),i=t.getBoundingClientRect(),o=e.getBoundingClientRect(),a=i.top===o.top&&i.bottom===o.bottom&&i.left===o.left&&i.right===o.right&&i.height===o.height&&i.width===o.width;return 0===e.childNodes.length&&("DIV"===n||"SPAN"===n)&&"none"===r.backgroundImage&&"none"===r.borderStyle&&"rgba(0, 0, 0, 0)"===r.backgroundColor&&a},h=function(t,e){var n=t.width*t.height,r=Math.max(0,Math.min(t.right,e.right)-Math.max(t.left,e.left)),i=Math.max(0,Math.min(t.bottom,e.bottom)-Math.max(t.top,e.top));return r*i/n}}function e(){this.getViewabilityState=function(r,i){var o,a=t();if(a.area===1/0)return{error:"Failed to determine viewport"};var c=r.getBoundingClientRect(),u=c.width*c.height,d=e(window.top),l=n(r,i);return a.area/u<.5?o=Math.floor(100*a.area/u):(l.bottom>d.height&&(l.height-=l.bottom-d.height),l.top<0&&(l.height+=l.top),l.left<0&&(l.width+=l.left),l.right>d.width&&(l.width-=l.right-d.width),o=Math.floor(100*(l.width*l.height)/u)),{clientWidth:d.width,clientHeight:d.height,objTop:c.top,objBottom:c.bottom,objLeft:c.left,objRight:c.right,percentViewable:o}};var t=function(){for(var t=e(window),n=t.area,r=window;r!==window.top;){r=r.parent;var i=e(r);i.area<n&&(n=i.area,t=i)}return t},e=function(t){var e={width:1/0,height:1/0,area:1/0};return!isNaN(t.document.body.clientWidth)&&t.document.body.clientWidth>0&&(e.width=t.document.body.clientWidth),!isNaN(t.document.body.clientHeight)&&t.document.body.clientHeight>0&&(e.height=t.document.body.clientHeight),t.document.documentElement&&t.document.documentElement.clientWidth&&!isNaN(t.document.documentElement.clientWidth)&&(e.width=t.document.documentElement.clientWidth),t.document.documentElement&&t.document.documentElement.clientHeight&&!isNaN(t.document.documentElement.clientHeight)&&(e.height=t.document.documentElement.clientHeight),t.innerWidth&&!isNaN(t.innerWidth)&&(e.width=Math.min(e.width,t.innerWidth)),t.innerHeight&&!isNaN(t.innerHeight)&&(e.height=Math.min(e.height,t.innerHeight)),e.area=e.height*e.width,e},n=function t(e,n){var i=n,o=n.parent,a={width:0,height:0,left:0,right:0,top:0,bottom:0};if(e){var c=r(e,n);if(c.width=c.right-c.left,c.height=c.bottom-c.top,a=c,i!==o){var u=t(i.frameElement,o);u.bottom<a.bottom&&(u.bottom<a.top&&(a.top=u.bottom),a.bottom=u.bottom),u.right<a.right&&(u.right<a.left&&(a.left=u.right),a.right=u.right),a.width=a.right-a.left,a.height=a.bottom-a.top}}return a},r=function t(e,n){var r=n,i=n.parent,o={left:0,right:0,top:0,bottom:0};if(e){var a=e.getBoundingClientRect();r!==i&&(o=t(r.frameElement,i)),o={left:a.left+o.left,right:a.right+o.left,top:a.top+o.top,bottom:a.bottom+o.top}}return o}}var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t,e,n){function r(){H||"loading"===e.readyState||(H=!0,t.setTimeout(function(){i(e)},0))}function i(t){var e,n,r=[],i=[],a=t.querySelectorAll("ins.adsbyfalcon");for(e=0,n=a.length;e<n;e++){var l,h,f=a[e],s=f.getAttribute("data-ad-slot"),m=_(f.getAttribute("data-ad-sizes")),g=f.offsetWidth||0,b=f.offsetHeight||0;!s||x(f)||S(f)||(r.push(s),m&&(l=c(u(m)).sort(d),h=o(l),s=h?h.slot:s),i.push({id:s,width:g,height:b,element:f}),E(f))}r.length&&p(i)}function o(t){var e,n,r=a().width;if(n=t.filter(function(t){return r>=t.width}),1===n.length)return n=t.reverse().slice(0,2),n=n.filter(function(t){return{}.hasOwnProperty.call(t,"slot")}),n[0];var i,o,c=n.findIndex(function(t){return!t.slot&&t.width===r}),u=c-1,d=c+1,l=t[c].width;return 0===c?e=n[1]:n.length-1===c?e=n[u]:(i=n[u].width,o=n[d].width,e=Math.abs(o-l)<Math.abs(i-l)?n[d]:n[u]),e}function a(){var n=Math.max(t.innerWidth,e.documentElement.clientWidth),r=Math.max(t.innerHeight,e.documentElement.clientHeight);return 793<=n&&n<=807&&(n=800),1017<=n&&n<=1031&&(n=1024),{width:n,height:r}}function c(t){var e=a();return t.concat([e])}function u(t){var e,n=[];for(e in t)t.hasOwnProperty(e)&&n.push({resolution:e,slot:t[e],width:Math.floor(e.match(/^\d+/)[0]),height:Math.floor(e.match(/\d+$/)[0])});return n}function d(t,e){return t.width!==e.width?e.width>t.width?1:e.width<t.width?-1:0:e.height>t.height?1:e.height<t.height?-1:0}function l(e,n){for(;n.length;){var r=n.shift(),i=e.shift();i&&!S(i.element)&&(s(i.element,i.width,i.height,r.html),N(i.element),void 0!==t.pix&&T(i.element,r),"2199"!==r.pos_id&&"1101"!==r.pos_id||h(i.element))}}function h(t){function e(){this.offsetWidth>=1100&&(t.parentNode.parentNode.parentNode.classList.add("header-ad--horizontal-carousel"),R||(R=!0,f())),this.removeEventListener("load",e)}var n=t.querySelector("img, iframe");n&&n.addEventListener("load",e)}function f(){var t=[{file:"horizontal-ad--bundle--modern.min.js",type:"module"},{file:"horizontal-ad--bundle.min.js"}];Object.keys(t).map(function(n){var r=e.createElement("script");t[n].type?r.type=t[n].type:r.setAttribute("nomodule",""),r.src="https://front.pixfs.net/js/"+t[n].file;var i=e.getElementsByTagName("script")[0];i.parentNode.insertBefore(r,i)})}function s(n,r,i,o){if("false"===n.getAttribute("data-embed"))return n.innerHTML=o,void m(n);t.pix&&n&&n.classList&&n.classList.add("pixnet-ad");var a=e.createElement("iframe"),c="margin:0;padding:0;overflow:hidden;background-color:transparent;";a.setAttribute("allowfullscreen","auto"),a.setAttribute("style",c+"border:none;width:"+r+"px;height:"+i+"px;"),a.setAttribute("scrolling","no"),n.innerHTML="",n.appendChild(a),a.contentDocument.open(),a.contentDocument.write(o),a.contentDocument.body&&a.contentDocument.body.setAttribute("style",c),a.contentDocument.close()}function m(e){if("SCRIPT"===e.tagName)return e.parentNode.replaceChild(g(e),e),e;var n=0,r=e.childNodes;for(t.pix&&"INS"===e.tagName&&e&&e.classList&&e.classList.add("pixnet-ad");n<r.length;)m(r[n++]);return e}function g(t){var n=e.createElement("script");n.text=t.innerHTML;for(var r=t.attributes.length-1;r>=0;r--)n.setAttribute(t.attributes[r].name,t.attributes[r].value);return n}function p(e){var n=O(),r=n?"&demo_ad_no="+n:"",i="https://"+v()+"/ad/json?"+b(e)+"&version=2&t="+(new Date).getTime()+r,o=A("falcon:blogcategory"),a=A("falcon:articlecategory");o&&(i+="&blog_category="+o),a&&(i+="&article_category="+a);var c=new XMLHttpRequest;t.XDomainRequest&&(c=new XDomainRequest,c.onprogress=function(){},c.ontimeout=function(){},c.onerror=function(){}),c.onload=function(){var t=_(this.responseText);C(t.ad_slots)&&t.ad_slots.length&&l(e,t.ad_slots)},c.addEventListener&&c.addEventListener("error",function(t){},!1),c.open("get",i,!0),c.withCredentials=!0,c.send()}function b(t){for(var e="",n=0,r=t.length;n<r;n++)e=e+w(t[n])+(n!==r-1?"&":"");return e}function w(t){return"pos[]="+t.id+","+t.width+","+t.height}function v(){var t=y()||"falcon";return t+".pixanalytics.com"}function y(){for(var t=e.getElementsByTagName("script"),n=/\/\/([^.]*falcon)-asset\.pixfs\.net/g,r=0,i=t.length;r<i;r++){var o=n.exec(t[r].getAttribute("src"));if(o)return o[1]}}function A(t){var n=e.querySelector('meta[property="'+t+'"]');return n&&n.getAttribute("content")}function x(t){return M(t,"processing")}function E(t){return q(t,"processing")}function S(t){return M(t,"done")}function N(t){return q(t,"done")}function M(t,e){return!!t&&e===t.getAttribute("data-adsbyfalcon-status")}function q(t,e){return!!t&&t.setAttribute("data-adsbyfalcon-status",e)}function _(t){try{return JSON.parse(t)}catch(t){return{}}}function L(e){if(!e)return"";for(var n=t.location.search.substring(1),r=n.split("&"),i=0;i<r.length;i++){var o=r[i].split("=");if(o[0]===e)return decodeURIComponent(o[1].replace(/\+/g," "))}return""}function O(){return"11"===L("preview_mib_fly_mobile_image_ad")?"75ecc55cd322ced48ae2d4c7717a0891":L("demo_ad_no")}function C(t){return t&&t instanceof Array}function T(t,r){var i=t.querySelector("img, iframe");if(!i)return void Object.keys(t.childNodes).map(function(n){var i=t.childNodes[n];if(void 0!==i&&"SCRIPT"===i.nodeName){var o=V(i.innerHTML);if(o){var a=e.querySelector(o);if(a){t!==a.parentNode&&(a=a.parentNode);var c=a.querySelector(".adsbygoogle"),u=void 0;return c?void T(a.querySelector(".adsbygoogle"),r):(a.addEventListener("DOMSubtreeModified",function t(){return a.querySelector(".adsbygoogle img, .adsbygoogle iframe")?(T(a.querySelector(".adsbygoogle"),r),void a.removeEventListener("DOMSubtreeModified",t,!1)):void(a.querySelector("img, iframe")&&!u&&(u=!0,T(a,r)))}),void(a.querySelector("img, iframe")&&!u&&(u=!0,T(a,r))))}}}});if(0!==r.ad_list.length){var o=r.ad_list[0].activeview_url;if(o){var a=new n;i.addEventListener("load",function t(){a.checkViewability(i,function(e){if(e.viewabilityStatus){var n=new Image;n.src=o,i.removeEventListener("load",t,!1)}})})}}}function V(t){var e=t.match(/falcon_dom = '[\w]+'/);if(e)return"#"+e[0].split("'")[1];var n=t.match(/pop-ad-cover/);if(n)return".pop-ad-cover .iframe";var r=t.match(/\).append\(/g);return r&&r.length>1?r[1].split("'")[1]:""}var F=function(){};t.console=t.console||{log:F,warn:F,error:F,dir:F},Array.prototype.findIndex||(Array.prototype.findIndex=function(t){if(null==this)throw new TypeError("Array.prototype.findIndex called on null or undefined");if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var e,n=Object(this),r=n.length>>>0,i=arguments[1],o=0;o<r;o++)if(e=n[o],t.call(i,e,o,n))return o;return-1}),Array.prototype.filter||(Array.prototype.filter=function(t){if(void 0===this||null===this)throw new TypeError;var e,n,r,i=Object(this),o=i.length>>>0,a=[];if("function"!=typeof t)throw new TypeError;for(a=[],e=arguments.length>=2?arguments[1]:void 0,n=0;n<o;n++)n in i&&(r=i[n],t.call(e,r,n,i)&&a.push(r));return a}),t.requestAnimFrame=t.requestAnimFrame||function(){return t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(e){t.setTimeout(e,1e3/60)}}(),t.cancelAFrame=function(){return t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.mozCancelAnimationFrame||t.oCancelAnimationFrame||function(e){t.clearTimeout(e)}}();var H=!1;e.addEventListener("readystatechange",r),t.PIXFalcon=function(){function t(){}return t.prototype.placeAds=function(t){var n,r,o;if(e===t)return void i(e);if(n=e.querySelectorAll(t),r=n.length,0!==r)for(o=0;o<r;o++)i(n[o])},t}(),r();var R=!1}(window,document,t)}();
